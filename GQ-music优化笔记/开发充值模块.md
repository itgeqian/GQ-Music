开发充值模块

1.首先管理端要配置商品![image-20250914221604539](C:\Users\wanglei\AppData\Roaming\Typora\typora-user-images\image-20250914221604539.png)

前端管理端页面添加商品页面，需要商品表

![image-20250914221834537](C:\Users\wanglei\AppData\Roaming\Typora\typora-user-images\image-20250914221834537.png)

```
-- ----------------------------
-- Table structure for product_info
-- ----------------------------
DROP TABLE IF EXISTS `product_info`;
CREATE TABLE `product_info`  (
  `product_id` varchar(5) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '商品ID',
  `product_name` varchar(150) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '商品名称',
  `cover` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '封面',
  `price` decimal(5, 2) NULL DEFAULT NULL COMMENT '价格',
  `product_description` varchar(300) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '商品描述',
  `create_time` datetime NULL DEFAULT NULL COMMENT '创建时间',
  `onsale_type` tinyint(1) NULL DEFAULT NULL COMMENT '上架类型',
  `integral` int(11) NULL DEFAULT NULL COMMENT '购买积分',
  `sort` int(11) NULL DEFAULT NULL COMMENT '排序号',
  PRIMARY KEY (`product_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '商品信息' ROW_FORMAT = DYNAMIC;
```

前后端商品都能互通时再进行支付模块的设计

2.需要商品订单表

```
-- ----------------------------
-- Table structure for pay_order_info
-- ----------------------------
DROP TABLE IF EXISTS `pay_order_info`;
CREATE TABLE `pay_order_info`  (
  `order_id` varchar(28) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '订单号',
  `user_id` varchar(12) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '用户ID',
  `product_id` varchar(5) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '商品ID',
  `product_name` varchar(150) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '商品名称',
  `amount` decimal(5, 2) NULL DEFAULT NULL COMMENT '金额',
  `channel_order_id` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '支付通道订单ID',
  `create_time` datetime NULL DEFAULT NULL COMMENT '订单创建时间',
  `pay_time` datetime NULL DEFAULT NULL COMMENT '支付时间',
  `status` tinyint(1) NULL DEFAULT NULL COMMENT '0:待支付 1:支付完成',
  `integral` int(11) NULL DEFAULT NULL COMMENT '购买积分',
  `pay_info` varchar(300) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '支付信息',
  `pay_type` tinyint(1) NULL DEFAULT NULL COMMENT '支付类型0:付款码 1:微信支付',
  PRIMARY KEY (`order_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '支付订单信息' ROW_FORMAT = DYNAMIC;

```

还需要付款码表（该项目支持微信支付与付款码支付 ）

支付码是管理员在管理端设置的可以替代充值的码，相当CDK/激活码

```
-- ----------------------------
-- Table structure for pay_code_info
-- ----------------------------
DROP TABLE IF EXISTS `pay_code_info`;
CREATE TABLE `pay_code_info`  (
  `pay_code` varchar(8) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '支付码',
  `amount` decimal(15, 2) NULL DEFAULT NULL COMMENT '金额',
  `create_time` datetime NULL DEFAULT NULL COMMENT '创建时间',
  `use_user_id` varchar(15) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '使用用户ID',
  `use_time` datetime NULL DEFAULT NULL COMMENT '使用时间',
  `status` tinyint(1) NULL DEFAULT NULL COMMENT '状态 0:待使用 1:已使用',
  PRIMARY KEY (`pay_code`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '支付码' ROW_FORMAT = DYNAMIC;

```

![image-20250914223133210](C:\Users\wanglei\AppData\Roaming\Typora\typora-user-images\image-20250914223133210.png)

管理端的订单模块

![image-20250914223210990](C:\Users\wanglei\AppData\Roaming\Typora\typora-user-images\image-20250914223210990.png)

